(dp0
S'./01_logsGrid.js'
p1
(dp2
S'minJS'
p3
S'var LogsGrid=Backbone.View.extend({initialize:function(){_.bindAll(this);this.subViews=[];this.grid=new Slick.Grid("#logGrid",this.collection,[{id:"date",name:"Date",field:"date",width:110},{id:"project",name:"Project",field:"project",width:180},{id:"observers",name:"Observers",field:"observers",width:180},{id:"instrument",name:"Instrument",field:"instrument",width:93},{id:"sa",name:"SA",field:"sa",width:110},{id:"oa",name:"OA",field:"oa",width:110},{id:"open",name:"Open",field:"open",width:55,cssClass:"cellLink",\nformatter:Slickback.NameFormatter},{id:"edit",name:"Edit",field:"edit",width:46,cssClass:"cellLink",formatter:Slickback.NameFormatter},{id:"delete",name:"Delete",field:"delete",width:70,cssClass:"cellLink",formatter:Slickback.NameFormatter},{id:"active",name:"Active?",field:"active",width:70,cssClass:"center",formatter:Slickback.CheckFormatter}],{formatterFactory:Slickback.BackboneModelFormatterFactory});this.grid.onClick.subscribe(this.handleClick);this.collection.on("reset",this.resetGrid)},handleClick:function(b){var c=\nthis.grid.getCellFromEvent(b),a=this.grid.getColumns()[c.cell].id;if("open"==a)a=this.collection.at(c.row),keOLARouter.navigate("logs/"+a.id,{trigger:!0});else if("edit"==a)a=this.collection.at(c.row),b=new LogEditor({model:a,parent:this}),b.startDialog(),this.subViews.push(b);else if("delete"==a)a=this.collection.at(c.row),b=new DeleteLogView({model:a,parent:this}),b.startDialog(),this.subViews.push(b);else if("active"==a){var a=this.collection.at(c.row),d=!a.get("active");(new SetActiveLog).save({logID:a.id,\nactive:d});a.set("active",d);this.grid.updateRow(c.row);c=document.getElementsByTagName("body")[0];window.getSelection().collapse(c,0);b.stopPropagation()}},resetGrid:function(){this.grid.invalidateAllRows();this.grid.render()},onClose:function(){this.collection.off("reset");this.grid.onClick.unsubscribe(this.handleClick);delete this.grid;$("#logGrid").off();_.each(this.subViews,function(b){b.close()})}});'
p4
sS'md5'
p5
S'\xb4\xf1p\x0c\xa0\x14@D(JX\xf4\xcd\xd7\xda\xfe'
p6
ssS'./02_editLog.js'
p7
(dp8
g3
S'var LogEditor=Backbone.View.extend({template:_.template($("#logEdit_template").html()),className:"logCreator",initialize:function(){_.bindAll(this);this.$el.html(this.template(this.model.toJSON()));$("body").append(this.el)},startDialog:function(){this.$el.dialog({autoOpen:!0,title:"Edit Log",width:700,position:["center","top"],buttons:{Cancel:this.close,Save:this.submit},modal:!0,open:function(){$("div.ui-dialog").css({top:"75px"});$(".ui-dialog-titlebar-close").hide()}})},submit:function(){q.start("editLog",\n{code:this.model.save,preArgs:{project:this.$("#log-pname").val(),observers:this.$("#log-obsv").val(),sa:this.$("#log-sa").val(),oa:this.$("#log-oa").val()},context:this.model,success:this.submitSuccess});q.request("editLog")},submitSuccess:function(){this.close();q.remove("editLog");this.options.parent.resetGrid()},onClose:function(){this.$el.dialog("destroy")}});'
p9
sg5
S'\xccGU\xc0M\x01]\xd2[\x03\xd3k\xbd\xf7\xd5\x94'
p10
ssS'./03_deleteLog.js'
p11
(dp12
g3
S'var DeleteLogView=Backbone.View.extend({template:_.template($("#deleteLog_template").html()),initialize:function(){_.bindAll(this);this.$el.html(this.template(this.model.toJSON()));$("body").append(this.el)},startDialog:function(){this.$el.dialog({autoOpen:!0,width:600,title:"Delete Log?",position:["center","middle"],buttons:{Cancel:this.close,Delete:this.deleteLog,"Delete (+ FITS)":this.fullDeleteLog},modal:!0,zIndex:9999,closeOnEscape:!0})},deleteLog:function(){this.model.destroy();this.options.parent.resetGrid();\nthis.close()},fullDeleteLog:function(){this.model.urlRoot="/admin/logs/fullDelete";this.model.destroy();this.options.parent.resetGrid();this.close()},onClose:function(){this.$el.dialog("destroy")}});'
p13
sg5
S"\x17\xb6\x86'\x08\xe2}\n\x80\xce\xd6\xcbi\x8e9\xdd"
p14
ssS'./admin.js'
p15
(dp16
g3
S'var AdminView=Backbone.View.extend({template:_.template($("#admin_template").html()),initialize:function(){_.bindAll(this);this.filter=this.options.adminFilter;this.$el.html(this.template());$("body").append(this.el);this.logs=new LogCollection([],{adminFilter:this.filter});this.logsGrid=new LogsGrid({collection:this.logs});q.start("fetchLogs",{code:this.logs.fetch,context:this.logs});this.$("#utcFrom").datepicker({showOn:"both",autoSize:!0});this.$("#utcTo").datepicker({showOn:"both",autoSize:!0});\nthis.filter.search&&this.$("#textFilter").val(this.filter.search);if(this.filter.utcTo)this.$("#utcTo").val(this.filter.utcTo);else{var a=new Date,a=(a.getUTCMonth()+1).toString()+"/"+a.getUTCDate().toString()+"/"+a.getUTCFullYear().toString();this.$("#utcTo").val(a)}this.filter.utcFrom?this.$("#utcFrom").val(this.filter.utcFrom):(a=new Date(Date.now()-864E6),a=(a.getUTCMonth()+1).toString()+"/"+a.getUTCDate().toString()+"/"+a.getUTCFullYear().toString(),this.$("#utcFrom").val(a));this.$("#utcFrom").on("change",\nthis.updateFilter);this.$("#utcTo").on("change",this.updateFilter);a=_.debounce(this.updateFilter,300);this.$("#textFilter").on("keyup",a);this.updateFilter()},startDialog:function(){this.$el.dialog({autoOpen:!0,title:"Administration",width:1080,position:["center","top"],buttons:{"Create New Log":function(){keOLARouter.navigate("admin/logs/create",{trigger:!0})}},closeOnEscape:!1,open:function(){$("div.ui-dialog").css({top:"75px"});$(".ui-dialog-titlebar-close").hide()}})},updateFilter:function(){this.filter.utcFrom=\nthis.$("#utcFrom").val();this.filter.utcTo=this.$("#utcTo").val();this.filter.search=this.$("#textFilter").val();q.request("fetchLogs")},onClose:function(){this.logsGrid.close();this.$el.dialog("destroy");this.$("#textFilter").off();this.$("#utcFrom").off();this.$("#utcTo").off();this.$("#utcFrom").datepicker("destroy");this.$("#utcTo").datepicker("destroy")}});'
p17
sg5
S' i\x02\xebQ\x17$\x1b\xe3\x1dt\x12v\xc3x6'
p18
ss.